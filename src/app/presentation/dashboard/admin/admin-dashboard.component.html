<section class="dashboard dashboard--admin">
  <h1 class="dashboard__title">{{ title }}</h1>

  <div class="dashboard__header">
    <p class="dashboard__subtitle">Bienvenido, {{ nombre }} ğŸ‘‹</p>

    <div class="dashboard__actions">
      <button mat-flat-button class="btn btn--primary" (click)="abrirFormulario()">
        <mat-icon>add</mat-icon>
        Nueva propiedad
      </button>

      <button mat-icon-button class="btn btn--icon btn--warn" (click)="logout()">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </div>

  <!-- ğŸ“‹ Tabla de propiedades -->
  <div class="dashboard__section dashboard__section--list dashboard__section--panel">
    <app-dashboard-table
      [title]="'ğŸ“‹ Propiedades registradas'"
      [dataSource]="dataSourcePropiedades"
      [displayedColumns]="displayedColumns"
      [columnDefs]="[
        { key: 'titulo', label: 'TÃ­tulo' },
        { key: 'tipo', label: 'Tipo' },
        { key: 'estado', label: 'Estado' },
        { key: 'ubicacion', label: 'UbicaciÃ³n' },
        { key: 'precio', label: 'Precio' }
      ]"
      [emptyMessage]="'No hay propiedades registradas aÃºn.'"
    ></app-dashboard-table>
  </div>

  <!-- ğŸ‘¥ Tabla de usuarios -->
  <div class="dashboard__section dashboard__section--list dashboard__section--panel">
    <div class="dashboard__actions">
      <button mat-flat-button class="btn btn--primary" (click)="abrirFormularioUsuario()">
        <mat-icon>add</mat-icon>
        Nuevo usuario
      </button>
    </div>

    <ng-template #rolesTemplate let-row>
      {{ formatearRoles(row.roles) }}
    </ng-template>

    <app-dashboard-table
      [title]="'ğŸ‘¥ Usuarios registrados'"
      [dataSource]="dataSourceUsuarios"
      [displayedColumns]="displayedUserColumns"
      [columnDefs]="[
        { key: 'nombre', label: 'Nombre' },
        { key: 'email', label: 'Email' },
        { key: 'roles', label: 'Roles' }
      ]"
      [emptyMessage]="'No hay usuarios registrados aÃºn.'"
      [showActions]="true"
      [customTemplates]="{ roles: rolesTemplate }"
      (editar)="editarUsuario($event)"
      (eliminar)="eliminarUsuario($event.id)"
    ></app-dashboard-table>
  </div>

  <!-- ğŸ“Š EstadÃ­sticas -->
  <div class="dashboard__section dashboard__section--estadisticas">
    <h2 class="dashboard__section-title">ğŸ“Š EstadÃ­sticas</h2>

    <button mat-stroked-button routerLink="/dashboard/admin/estadisticas" class="btn btn--secondary">
      <mat-icon>bar_chart</mat-icon>
      Ver estadÃ­sticas de propiedades
    </button>
  </div>
</section>
