<section class="dashboard dashboard--admin">
  <h1 class="dashboard__title">{{ title }}</h1>

  <div class="dashboard__header">
    <p class="dashboard__subtitle">Bienvenido, {{ nombre }} 游녦</p>

    <div class="dashboard__actions dashboard__actions--right">
      <button *ngIf="esAdmin" mat-flat-button class="btn btn--primary" (click)="abrirFormulario()">
        <mat-icon>add</mat-icon>
        Nueva propiedad
      </button>

      <button mat-icon-button class="btn btn--icon btn--warn" (click)="logout()" matTooltip="Cerrar sesi칩n">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </div>

  <!-- 游늶 Propiedades -->
  <div class="dashboard__section dashboard__section--list dashboard__section--panel">
    <ng-template #estadoTemplate let-row>
      <span class="dashboard__estado dashboard__estado--{{ row.estado | lowercase }}">
        {{ row.estado | estado }}
      </span>
    </ng-template>

    <ng-template #precioTemplate let-row>
      {{ row.precio | precioMoneda }}
    </ng-template>

    <app-dashboard-table [title]="'游늶 Mis propiedades'" [dataSource]="dataSourcePropiedades"
      [displayedColumns]="displayedColumns" [columnDefs]="[
        { key: 'titulo', label: 'T칤tulo' },
        { key: 'tipo', label: 'Tipo' },
        { key: 'estado', label: 'Estado' },
        { key: 'ubicacion', label: 'Ubicaci칩n' },
        { key: 'precio', label: 'Precio' }
      ]" [customTemplates]="{ estado: estadoTemplate, precio: precioTemplate }"
      [emptyMessage]="'No has creado propiedades a칰n.'">
    </app-dashboard-table>
  </div>

  <!-- 游논 Clientes -->
  <div class="dashboard__section dashboard__section--list dashboard__section--panel">
    <div class="dashboard__actions dashboard__actions--right">
      <button mat-flat-button class="btn btn--primary" (click)="abrirFormularioCliente()">
        <mat-icon>person_add</mat-icon>
        Nuevo cliente
      </button>
    </div>

    <ng-template #rolesTemplate let-row>
      {{ formatearRoles(row.roles) }}
    </ng-template>

    <app-dashboard-table [title]="'游논 Mis clientes'" [dataSource]="dataSourceClientes"
      [displayedColumns]="displayedClientColumns" [columnDefs]="[
        { key: 'nombre', label: 'Nombre' },
        { key: 'email', label: 'Email' },
        { key: 'roles', label: 'Roles' }
      ]" [customTemplates]="{ roles: rolesTemplate }" [emptyMessage]="'No tienes clientes registrados a칰n.'"
      [showActions]="true" [showDelete]="true" (editar)="editarCliente($event)" (eliminar)="eliminarCliente($event.id)">
    </app-dashboard-table>
  </div>
