<section class="dashboard dashboard--agente">
  <h1 class="dashboard__title">{{ title }}</h1>

  <!-- 游녦 Bienvenida con logout en la cabecera -->
  <div class="dashboard__section dashboard__section--panel dashboard__section--welcome">
    <div class="dashboard__header">
      <p class="dashboard__subtitle">Bienvenido, {{ nombre }} 游녦</p>

      <div class="dashboard__actions dashboard__actions--right">
        <button mat-icon-button class="btn btn--icon btn--warn" (click)="sesionService.logout()"
          matTooltip="Cerrar sesi칩n" aria-label="Cerrar sesi칩n">
          <mat-icon>logout</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- 游늶 Propiedades del agente -->
  <div class="dashboard__section dashboard__section--panel">
    <div class="dashboard__section-title">
      游늶 <span>Mis propiedades</span>
    </div>

    <app-tabla-propiedades [propiedades]="propiedades" [mostrarAcciones]="false" [pageSize]="5"
      [pageSizeOptions]="[5, 10, 20]" [emptyMessage]="'No has creado propiedades a칰n.'">
    </app-tabla-propiedades>
  </div>

  <!-- 游논 Clientes -->
  <div class="dashboard__section dashboard__section--panel">
    <div class="dashboard__section-title">
      游논 <span>Mis clientes</span>
    </div>

    <div class="dashboard__actions dashboard__actions--right">
      <button mat-flat-button class="btn btn--primary" (click)="abrirFormularioCliente()">
        <mat-icon>person_add</mat-icon>
        Nuevo cliente
      </button>
    </div>

    <ng-template #rolesTemplate let-row>
      {{ row.roles | formatearRoles }}
    </ng-template>

    <app-dashboard-table [dataSource]="dataSourceClientes" [displayedColumns]="['nombre','email','roles']" [columnDefs]="[
        { key: 'nombre', label: 'Nombre' },
        { key: 'email', label: 'Email' },
        { key: 'roles', label: 'Roles' }
      ]" [customTemplates]="{ roles: rolesTemplate }" [emptyMessage]="'No tienes clientes registrados a칰n.'"
      [showActions]="true" [showDelete]="true" (editar)="editarCliente($event)"
      (eliminar)="eliminarCliente($event.id!)">
    </app-dashboard-table>
  </div>
</section>
